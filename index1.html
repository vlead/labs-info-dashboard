<TYPE html>
<html>
<link rel="stylesheet" type="text/css" href="dashboard.css" />
<link href="tabcontent.css" rel="stylesheet" type="text/css" />
<body>
	<div class = "a"></div>
	<div id="header">Virtual Labs' Dashboard
	</div>
	<div class = "vlabsIcon" > </div>
	<div><div id = "login"><button type="button" onclick="log_in()" >Sign In</button></div></div>


	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<script src="https://login.persona.org/include.js"></script>
	<script type="text/javascript">

	var currentUser = '';
	
	navigator.id.watch({
	  loggedInUser: currentUser,
	  onlogin: function(assertion) {
    // A user has logged in! Here you need to:
    // 1. Send the assertion to your backend for verification and to create a session.
    // 2. Update your UI.
    window.location.href="dashboard.html"
    $.ajax({ /* <-- This example uses jQuery, but you can use whatever you'd like */
      type: 'POST',
      url: '/auth/login', // This is a URL on your website.
      data: {assertion: assertion},
      success: function(res, status, xhr) { alert("Login failure: " + err); window.location.reload(); },
      error: function(xhr, status, err) {
        navigator.id.logout();
        alert("Login failure: " + err);
      }
    });
  },

  onlogout: function() {
    // A user has logged out! Here you need to:
    // Tear down the user's session by redirecting the user or making a call to your backend.
    // Also, make sure loggedInUser will get set to null on the next page load.
    // (That's a literal JavaScript null. Not false, 0, or undefined. null.)
    $.ajax({
      type: 'POST',
      url: 'index.html', // This is a URL on your website.
      success: function(res, status, xhr) { window.location.reload(); },
      error: function(xhr, status, err) { alert("Logout failure: " + err); }
    });
  }
});

	


	function log_in(){

                navigator.id.request();
			
	}


	</script>
</body>
</html>

